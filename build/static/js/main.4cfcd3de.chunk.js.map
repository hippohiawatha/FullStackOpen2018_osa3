{"version":3,"sources":["components/person.js","services/contacts.js","App.js","index.js"],"names":["Person","props","persons","state","search","length","react_default","a","createElement","filter","person","name","toLowerCase","includes","map","key","id","number","onClick","remover","baseUrl","contacts","getAll","axios","get","create","newPerson","post","update","updatedPerson","put","concat","then","response","data","remove","delete","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addPerson","event","preventDefault","personObj","newName","newNum","pers","index","findIndex","per","window","confirm","contactService","console","log","setState","message","setTimeout","inputName","target","value","inputNum","_this2","catch","error","alert","App_Notification","onChange","onSubmit","type","components_person","React","Component","Notification","_ref","className","ReactDOM","render","src_App","document","getElementById","promise"],"mappings":"sPA0BeA,EAxBA,SAACC,GACd,IAAMC,EAAUD,EAAME,MAAMD,QACtBE,EAASH,EAAME,MAAMC,OAC3B,OAAsB,IAAnBF,EAAQG,OAEPC,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACGN,EAAQO,OAAO,SAAAC,GAAM,OACpBA,EAAOC,KAAKC,cACXC,SAAST,EAAOQ,iBAAgBE,IAAI,SAAAJ,GAAM,OAC3CJ,EAAAC,EAAAC,cAAA,MAAIO,IAAKL,EAAOM,IACZV,EAAAC,EAAAC,cAAA,UAAKE,EAAOC,MACZL,EAAAC,EAAAC,cAAA,UAAKE,EAAOO,QACZX,EAAAC,EAAAC,cAAA,UACIF,EAAAC,EAAAC,cAAA,UAAQU,QAASjB,EAAMkB,QAAQT,EAAOM,GAAIN,EAAOC,OAAjD,gBAONL,EAAAC,EAAAC,cAAA,wCCtBRY,EAAU,eAmBDC,EAAA,CAACC,OAjBD,WACb,OAAOC,IAAMC,IAAIJ,IAgBKK,OAbT,SAACC,GACd,OAAOH,IAAMI,KAAKP,EAASM,IAYGE,OATjB,SAACZ,EAAIa,GAElB,OADgBN,IAAMO,IAAN,GAAAC,OAAaX,EAAb,KAAAW,OAAwBf,GAAMa,GAC/BG,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAOHC,OAJzB,SAACnB,GACd,OAAOO,IAAMa,OAAN,GAAAL,OAAgBX,EAAhB,KAAAW,OAA2Bf,MCoGrBqB,qBA/Gb,SAAAA,EAAYpC,GAAO,IAAAqC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,IACjBC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,KAAAH,KAAMxC,KAsBR4C,UAAY,SAACC,GACXA,EAAMC,iBACN,IAAMC,EAAY,CAACrC,KAAM2B,EAAKnC,MAAM8C,QAAShC,OAAQqB,EAAKnC,MAAM+C,QAC1DvC,EAAOqC,EAAUrC,KACnBT,EAAUoC,EAAKnC,MAAMD,QACzB,GAAIA,EAAQY,IAAI,SAAAqC,GAAI,OAAIA,EAAKxC,OAAME,SAASmC,EAAUrC,MAalD,CACF,IAAMyC,EAAQd,EAAKnC,MAAMD,QAAQmD,UAAU,SAAAC,GAAG,OAAIA,EAAI3C,OAASqC,EAAUrC,OACnEK,EAAKsB,EAAKnC,MAAMD,QAAQkD,GAAOpC,GAClCuC,OAAOC,QAAQlB,EAAKnC,MAAMD,QAAQkD,GAAOzC,KAAO,0DACjD8C,EACG7B,OAAOZ,EAAIgC,GACXhB,KAAK,SAAAtB,GACJgD,QAAQC,IAAIjD,EAAOM,IACnB,IAAMd,EAAUoC,EAAKnC,MAAMD,QAAQO,OAAO,SAAA0C,GAAI,OAAIA,EAAKnC,KAAOA,IAC9DsB,EAAKsB,SAAS,CACZ1D,QAASA,EAAQ6B,OAAOrB,GACxBuC,QAAS,GACTC,OAAQ,GACRW,QAAS,eAAcvB,EAAKnC,MAAMD,QAAQkD,GAAOzC,KAAO,wBAE1DmD,WAAW,kBAAMxB,EAAKsB,SAAS,CAACC,QAAS,QAAQ,YA3BvDJ,EACGhC,OAAOuB,GACPhB,KAAK,SAAAC,GACJK,EAAKsB,SAAS,CACZ1D,QAASA,EAAQ6B,OAAOE,EAASC,MACjCe,QAAS,GACTC,OAAQ,GACRW,QAAS,gBAAelD,IAE1BmD,WAAW,kBAAMxB,EAAKsB,SAAS,CAACC,QAAS,QAAQ,QAtCtCvB,EA8DnByB,UAAY,SAACjB,GACXR,EAAKsB,SAAS,CAACX,QAASH,EAAMkB,OAAOC,SA/DpB3B,EAiEnB4B,SAAW,SAACpB,GACVR,EAAKsB,SAAS,CAACV,OAAQJ,EAAMkB,OAAOC,SAlEnB3B,EAqEnBlC,OAAS,SAAC0C,GACRR,EAAKsB,SAAS,CAACxD,OAAQ0C,EAAMkB,OAAOC,SAtEnB3B,EAyEnBnB,QAAU,SAACH,EAAIL,GACb,OAAM,WACD4C,OAAOC,QAAQ,gBAAkB7C,IAClC8C,EACGtB,OAAOnB,GACPgB,KAAK,SAAAC,GACJK,EAAKsB,SAAS,CACZ1D,QAASoC,EAAKnC,MAAMD,QAAQO,OAAO,SAAA6C,GAAG,OAAIA,EAAItC,KAAOA,IACrD6C,QAAS,eAAiBlD,IAE5BmD,WAAW,kBAAMxB,EAAKsB,SAAS,CAACC,QAAS,QAAQ,SAjFzDvB,EAAKnC,MAAQ,CACXD,QAAS,GACT+C,QAAS,GACTC,OAAQ,GACR9C,OAAQ,GACRyD,QAAS,MAPMvB,mFAWA,IAAA6B,EAAA1B,KACjBiB,QAAQC,IAAI,aACZF,EACGnC,SACAU,KAAK,SAAAC,GACJkC,EAAKP,SAAS,CAAC1D,QAAS+B,EAASC,SAElCkC,MAAM,SAAAC,GACLC,MAAM,+CAuEV,OACEhE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAC+D,EAAD,CAAcV,QAASpB,KAAKtC,MAAM0D,UAClCvD,EAAAC,EAAAC,cAAA,sBAAaF,EAAAC,EAAAC,cAAA,SAAOyD,MAAOxB,KAAKtC,MAAMC,OAAQoE,SAAU/B,KAAKrC,UAE7DE,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,QAAMiE,SAAUhC,KAAKI,WACnBvC,EAAAC,EAAAC,cAAA,oBAAWF,EAAAC,EAAAC,cAAA,SAAOyD,MAAOxB,KAAKtC,MAAM8C,QAASuB,SAAU/B,KAAKsB,aAC5DzD,EAAAC,EAAAC,cAAA,sBAAaF,EAAAC,EAAAC,cAAA,SAAOyD,MAAOxB,KAAKtC,MAAM+C,OAAQsB,SAAU/B,KAAKyB,YAC7D5D,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,UAAQkE,KAAK,UAAb,iBAEPpE,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACmE,EAAD,CAAQxE,MAAOsC,KAAKtC,MAAOgB,QAASsB,KAAKtB,mBAzGjCyD,IAAMC,YAkHlBC,EAAe,SAAAC,GAAe,IAAblB,EAAakB,EAAblB,QACrB,OAAe,OAAZA,EAAyB,KAGxBvD,EAAAC,EAAAC,cAAA,OAAKwE,UAAU,SACZnB,ICvHToB,IAASC,OACP5E,EAAAC,EAAAC,cAAC2E,EAAD,MACAC,SAASC,eAAe,SAE1B,IAAMC,EAAU/D,IAAMC,IAAI,qCAC1BkC,QAAQC,IAAI2B","file":"static/js/main.4cfcd3de.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Person = (props) => {\r\n  const persons = props.state.persons\r\n  const search = props.state.search\r\n  if(persons.length !== 0){\r\n    return(\r\n      <table>\r\n        <tbody>\r\n          {persons.filter(person =>\r\n            person.name.toLowerCase()\r\n            .includes(search.toLowerCase())).map(person =>\r\n            <tr key={person.id}>\r\n                <td>{person.name}</td>\r\n                <td>{person.number}</td>\r\n                <td>\r\n                    <button onClick={props.remover(person.id, person.name)}>poista</button>\r\n                </td>\r\n            </tr>)}\r\n        </tbody>\r\n      </table>\r\n    )\r\n  }\r\n  else return <p>luettelossa ei ole tietoja</p>\r\n}\r\n\r\nexport default Person\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst create = (newPerson) => {\r\n  return axios.post(baseUrl, newPerson)\r\n}\r\n\r\nconst update = (id, updatedPerson) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, updatedPerson)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default {getAll, create, update, remove}\r\n","import React from 'react';\r\nimport Person from './components/person'\r\nimport contactService from './services/contacts'\r\nimport './index.css'\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      persons: [],\r\n      newName: '',\r\n      newNum: '',\r\n      search: '',\r\n      message: null\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    console.log('did mount')\r\n    contactService\r\n      .getAll()\r\n      .then(response => {\r\n        this.setState({persons: response.data})\r\n      })\r\n      .catch(error => {\r\n        alert(\"ei dataa\")\r\n      })\r\n  }\r\n\r\n  addPerson = (event) => {\r\n    event.preventDefault()\r\n    const personObj = {name: this.state.newName, number: this.state.newNum}\r\n    const name = personObj.name\r\n    let persons = this.state.persons\r\n    if(!persons.map(pers => pers.name).includes(personObj.name)){\r\n      contactService\r\n        .create(personObj)\r\n        .then(response => {\r\n          this.setState({\r\n            persons: persons.concat(response.data),\r\n            newName: '',\r\n            newNum: '',\r\n            message: \"Lisättiin \" + name\r\n          })\r\n          setTimeout(() => this.setState({message: null}), 5000)\r\n        })\r\n    }\r\n    else{\r\n      const index = this.state.persons.findIndex(per => per.name === personObj.name)\r\n      const id = this.state.persons[index].id\r\n      if(window.confirm(this.state.persons[index].name + \" on jo luettelossa, korvataanko vanha numero uudella?\")){\r\n        contactService\r\n          .update(id, personObj)\r\n          .then(person => {\r\n            console.log(person.id)\r\n            const persons = this.state.persons.filter(pers => pers.id !== id)\r\n            this.setState({\r\n              persons: persons.concat(person),\r\n              newName: '',\r\n              newNum: '',\r\n              message: \"Henkilön \" + this.state.persons[index].name + \" numero vaihdettiin\"\r\n            })\r\n            setTimeout(() => this.setState({message: null}), 5000)\r\n          })\r\n      }\r\n    }\r\n  }\r\n\r\n  inputName = (event) => {\r\n    this.setState({newName: event.target.value })\r\n  }\r\n  inputNum = (event) => {\r\n    this.setState({newNum: event.target.value})\r\n  }\r\n\r\n  search = (event) => {\r\n    this.setState({search: event.target.value})\r\n  }\r\n\r\n  remover = (id, name) => {\r\n    return() => {\r\n      if(window.confirm(\"poistetaanko \" + name)){\r\n        contactService\r\n          .remove(id)\r\n          .then(response => {\r\n            this.setState({\r\n              persons: this.state.persons.filter(per => per.id !== id),\r\n              message: \"Poistettiin \" + name\r\n            })\r\n            setTimeout(() => this.setState({message: null}), 5000)\r\n          })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Puhelinluettelo</h2>\r\n        <Notification message={this.state.message}/>\r\n        <div>search: <input value={this.state.search} onChange={this.search}/></div>\r\n\r\n        <h2>Lisää uusi</h2>\r\n        <form onSubmit={this.addPerson}>\r\n          <div>nimi: <input value={this.state.newName} onChange={this.inputName}/></div>\r\n          <div>numero: <input value={this.state.newNum} onChange={this.inputNum}/></div>\r\n          <div><button type=\"submit\">lisää</button></div>\r\n        </form>\r\n        <h2>Numerot</h2>\r\n        <div>\r\n          <Person state={this.state} remover={this.remover}/>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App\r\n\r\nconst Notification = ({message}) => {\r\n  if(message === null) return null\r\n  else{\r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\nimport App from './App.js';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\nconst promise = axios.get('http://localhost:3001/api/persons')\nconsole.log(promise)\n"],"sourceRoot":""}